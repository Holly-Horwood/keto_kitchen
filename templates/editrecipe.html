{% extends 'base.html'%}

{% block content %}

<div class="container-fluid recipe-form">
    <h3 class="add-title">Edit Recipe</h3>


    <div class="row add-row">
        <form action="{{ url_for('edit_recipe', recipe_id=recipe._id) }}" method="POST" enctype="multipart/form-data"
            class="form-group col-sm-12">
            <!--RECIPE NAME-->
            <div class="row field-row">
                <div class="input-field col-sm-12 col-md-6">
                    <i class="fas fa-clipboard-list recipe-icons"></i>
                    <label for="icon-prefix">Recipe Name</label>
                    <input class="recipe-field" name="recipe_name" type="text" class="validate"
                        value="{{recipe.recipe_name}}">
                </div>
            </div>
            <!--AUTHOR-->
            <div class="row">
                <div class="input-field col-sm-12 col-md-6">
                    <i class="fas fa-user recipe-icons"></i>
                    <label for="icon-prefix">Author</label>
                    <input class="recipe-field" name="recipe_author" type="text" class="validate"
                        value="{{recipe.recipe_author}}">
                </div>
            </div>

            <div class="container search-container col-md-6">
                <div class="row select-row">
                    <h4 class="search-title">Choose Search Options</h4>
                    <!--SEARCH OPTIONS-->
                    <div class="edit-course-field col-sm-12">
                        <label>Course:</label>
                        <p class="diet-p"><em>check all that apply</em></p>
                        {% for course in courses %}
                            <input type="checkbox" name="course" value="{{course.course}}" {{'checked' if course.course in recipe.course else ''}} />{{course.course}}
                            {% endfor %}
                    </div>

                    <div class="cuisine-field col-sm-12">
                        <label>Cuisine:</label>
                        <select name="cuisine">
                            <option value="">-- select one --</option>
                            {% for cuisine in cuisines %}
                            <option value="{{cuisine.cuisine}}" {{'selected' if cuisine.cuisine == recipe.cuisine else ''}}>{{cuisine.cuisine}}</option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="edit-diet-field col-sm-12">
                        <label>Diet:</label>
                        <p class="diet-p"><em>check all that apply</em></p>
                        {% for diet in diets %}
                            <input type="checkbox" name="diet" value="{{diet.diet}}" {{'checked' if diet.diet in recipe.diet else ''}} />{{diet.diet}}
                            {% endfor %}
                    </div>
                </div>
            </div>
            <!--START OF NUMBER FIELDS-->
            <div class="container number-box">
                <!--PREP TIME-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="far fa-clock recipe-icons"></i>
                        <label for="icon-prefix">Prep Time (mins)</label>
                        <input class="number-field" name="prep_time" type="text" class="validate"
                            value="{{recipe.prep_time}}">
                    </div>
                </div>
                <!--COOK TIME-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="fas fa-hourglass-end recipe-icons"></i>
                        <label for="icon-prefix">Cook Time (mins)</label>
                        <input class="number-field" name="cook_time" type="text" class="validate"
                            value="{{recipe.cook_time}}">
                    </div>
                </div>
                <!--SERVES-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="fas fa-utensils recipe-icons"></i>
                        <label for="icon-prefix">Serves</label>
                        <input class="number-field" name="serves" type="text" class="validate"
                            value="{{recipe.serves}}">
                    </div>
                </div>
                <!--CALORIES-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="fas fa-balance-scale recipe-icons"></i>
                        <label for="icon-prefix">Calories</label>
                        <input class="number-field" name="calories" type="text" class="validate"
                            value="{{recipe.calories}}">
                    </div>
                </div>
                <!--CARBS-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="fas fa-pizza-slice recipe-icons"></i>
                        <label for="icon-prefix">Carbs</label>
                        <input class="number-field" name="carbs" type="text" class="validate" value="{{recipe.carbs}}">
                    </div>
                </div>
                <!--PROTEIN-->
                <div class="row">
                    <div class="input-field col-sm-12">
                        <i class="fas fa-drumstick-bite recipe-icons"></i>
                        <label for="icon-prefix">Protein</label>
                        <input class="number-field" name="protein" type="text" class="validate"
                            value="{{recipe.protein}}">
                    </div>
                </div>
            </div>
            <!--END OF NUMBER FIELDS-->

            <!--START OF TEXT AREAS-->
            <div class="row">
                <div class="textareas form-group">
                    <!--INTRO-->
                    <div class="input-field">
                        <label for="intro">Introduction</label>
                        <textarea class="intro-text" rows="4" cols="50" name="blurb"
                            id="blurb">{{recipe.blurb}}</textarea>
                    </div>
                    <!--INGREDIENTS-->
                    <div class="input-field">
                        <label for="icon-prefix">Ingredients</label>
                        <textarea class="ingredients-text" rows="4" cols="50" name="ingredients"
                            id="ingredients">{{ingredients}}</textarea>
                    </div>
                    <!--METHOD-->
                    <div class="input-field">
                        <label for="icon-prefix">Method</label>
                        <textarea class="method-text" rows="4" cols="50" name="method" id="method">{{method}}</textarea>
                    </div>
                </div>
            </div>
            <!--END OF TEXT AREAS-->


            <!--ADD IMAGE-->
            <div class="row">
                <div class="image-preview">
                    <img id="output" class="img-thumbnail img-fluid" src="{{recipe.image_url}}"
                        alt="Photo of finished dish">
                </div>
                <div class="updated-image">
                    <input type="file" accept="image/*" name="image_file" id="image_file"
                        onchange="checkImageSize(event); previewFile(event)">
                </div>
                <div>
                    <p id="size-warning">Please select a file between 10kb and 20Mb to upload</p>
                </div>
            </div>
            <!--ADD BUTTON-->
            <div class="row">
                <div class="col-sm-12 text-center">
                    <button type="submit" class="btn btn-success add-btn">Update Recipe
                        <i class="fas fa-plus recipe-icons"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
<!-- BUTTON TRIGGER MODAL -->
<button type="button" class="btn btn-success" data-toggle="modal" data-target="#loginModal">
    Login
</button>

<!-- START OF LOGIN MODAL -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalTitle">Login</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-group">
                        <label for="loginEmail">Email address</label>
                        <input type="email" class="form-control" id="loginEmail" aria-describedby="emailHelp"
                            placeholder="Enter email address">
                        <small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone
                            else.</small>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" class="form-control" id="loginPassword"
                            placeholder="Enter your password">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Login</button>
            </div>
        </div>
    </div>
</div>
<!-- END OF LOGIN MODAL -->

{% endblock %}